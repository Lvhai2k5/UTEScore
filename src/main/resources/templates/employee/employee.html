<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UTEScore ‚Äì Giao di·ªán Nh√¢n vi√™n</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#667eea; --bg2:#764ba2; --ink:#1e293b;
    --card:#ffffff; --muted:#64748b; --ring:#a78bfa;
    --elev:0 20px 60px rgba(0,0,0,.10); --elev-sm:0 4px 12px rgba(0,0,0,.06);
    --border:#e2e8f0; --sidebar1:#1e293b; --sidebar2:#0f172a;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
    color: var(--ink);
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

/* ===== SIDEBAR ===== */
  .sidebar {
    width: 270px;
    background: linear-gradient(180deg, #1e293b, #0f172a, #312e81);
    color: white;
    display: flex;
    flex-direction: column;
    box-shadow: 4px 0 24px rgba(0,0,0,0.4);
    overflow-y: auto;
  }
  .logo-section {
    padding: 24px 16px;
    border-bottom: 1px solid rgba(255,255,255,0.15);
  }
  .logo {
    font-size: 28px;
    font-weight: 800;
    text-align: center;
    background: linear-gradient(90deg, #38bdf8, #a78bfa, #f472b6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 4s ease infinite;
  }
  @keyframes gradientShift {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }

  .staff-info {
    text-align: center;
    margin-top: 16px;
    background: rgba(255,255,255,0.07);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 0 10px rgba(255,255,255,0.1);
  }
  .staff-avatar {
    width: 70px; height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #38bdf8, #8b5cf6);
    margin: 0 auto 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 30px; color: #fff;
    box-shadow: 0 0 20px rgba(59,130,246,0.7);
  }
  .staff-name { font-weight: 700; font-size: 16px; }
  .staff-role { font-size: 13px; color: #cbd5e1; }

  .menu {
    padding: 16px;
    flex: 1;
  }
  .menu-title {
    font-size: 13px;
    font-weight: 700;
    color: #94a3b8;
    margin: 12px 0;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .menu-link {
    display: flex;
    align-items: center;
    gap: 12px;
    color: white;
    text-decoration: none;
    background: rgba(255,255,255,0.08);
    padding: 12px 16px;
    border-radius: 12px;
    margin-bottom: 8px;
    font-size: 15px;
    transition: all 0.3s ease;
  }
  .menu-link:hover {
    background: linear-gradient(135deg, #38bdf8, #a855f7);
    transform: translateX(6px) scale(1.03);
    box-shadow: 0 0 15px rgba(168,85,247,0.5);
  }
  .menu-link.active {
    background: linear-gradient(135deg, #38bdf8, #f472b6);
    box-shadow: 0 0 20px rgba(236,72,153,0.6);
  }
  .menu-icon {
    font-size: 18px;
    width: 26px;
    text-align: center;
  }
  /* ===== CONTENT ===== */
  .content {
    flex: 1;
    background: #f8fafc;
    margin: 24px;
    border-radius: 24px;
    padding: 32px;
    box-shadow: var(--elev);
    overflow-y: auto;
  }

  header {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-bottom: 32px;
  }
  header h2 {
    font-size: 32px;
    font-weight: 700;
    background: linear-gradient(135deg, #1e293b, #475569);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: relative;
  }
  header h2::after{
    content:"";
    position:absolute; left:0; bottom:-8px; width:56px; height:4px;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--bg1), var(--bg2));
    box-shadow: 0 4px 16px rgba(118,75,162,.45);
    animation: slidebar 3s ease-in-out infinite;
  }
  @keyframes slidebar {
    0%,100%{transform:translateX(0); opacity:.9}
    50%{transform:translateX(12px); opacity:1}
  }

  /* ===== CARDS ===== */
  .welcome-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 20px;
    padding: 32px;
    color: white;
    margin-bottom: 24px;
    box-shadow: 0 12px 36px rgba(118,75,162,.35);
    transform: translateY(6px);
    opacity: 0;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
  }
  .stat-card {
    background: var(--card);
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--elev-sm);
    transform: translateY(10px);
    opacity: 0;
  }
  .stat-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 12px;
  }
  .stat-icon {
    width: 44px; height: 44px;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px;
  }
  .stat-icon.blue { background: #dbeafe; color: #1e40af; }
  .stat-icon.green { background: #dcfce7; color: #166534; }
  .stat-icon.purple { background: #ede9fe; color: #5b21b6; }

  .stat-value { font-size: 30px; font-weight: 700; color: var(--ink); line-height: 1; }
  .stat-label { font-size: 13px; color: var(--muted); }

  .quick-actions {
    background: var(--card);
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--elev-sm);
  }
  .quick-actions h4 {
    font-size: 20px; margin-bottom: 20px; font-weight: 600; color: var(--ink);
  }
  .action-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
  }
  .action-btn {
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    border: 2px solid var(--border);
    padding: 20px;
    border-radius: 12px;
    cursor: pointer;
    transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    text-align: center;
    font-weight: 500;
    will-change: transform, box-shadow;
  }
  .action-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.08); border-color: #c7d2fe; }
  .action-btn:active { transform: translateY(0); }
  .action-btn:focus-visible { outline: 0; box-shadow: 0 0 0 4px rgba(167,139,250,.35); border-color: var(--ring); }
  .action-btn-icon { font-size: 30px; display: block; margin-bottom: 6px; }

  /* ===== Ripple effect for buttons & menu links ===== */
  .ripple {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    background: rgba(167,139,250,.35);
    animation: ripple .6s linear;
    pointer-events: none;
  }
  @keyframes ripple {
    to { transform: scale(12); opacity: 0; }
  }

  /* ===== Table enhancements (applies to any table inside .content) ===== */
  .content table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--elev-sm);
  }
  .content th, .content td { padding: 12px 14px; border-bottom: 1px solid #eef2f7; text-align: left; }
  .content th { background: #f1f5f9; font-weight: 600; color: #0f172a; }
  .content tbody tr { opacity: 0; transform: translateY(8px); }
  .content tbody tr.shown { opacity: 1; transform: none; transition: opacity .35s ease, transform .35s ease; }
  .content tbody tr:hover { background: #f8fafc; }

  /* Skeleton loader for table rows */
  .skeleton {
    display: inline-block; height: 12px; width: 100%;
    background: linear-gradient(90deg, #eef2f7 25%, #e5eaf1 37%, #eef2f7 63%);
    background-size: 400% 100%;
    animation: shimmer 1.2s ease-in-out infinite;
    border-radius: 6px;
  }
  @keyframes shimmer {
    0% { background-position: 100% 0; }
    100% { background-position: 0 0; }
  }

  /* Reveal animations */
  .reveal { opacity: 0; transform: translateY(12px); }
  .reveal.show { opacity: 1; transform: none; transition: opacity .5s ease, transform .5s ease; }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .menu-link, .action-btn, .stat-card, .welcome-card, .reveal, .content tbody tr { transition: none !important; animation: none !important; transform: none !important; }
  }
</style>
</head>
<body>
  <aside class="sidebar">
  <div class="logo-section">
    <div class="logo">UTEScore</div>
    <div class="staff-info">
      <div class="staff-avatar">üíé</div>
      <div class="staff-name" th:text="${nhanVienDangNhap?.fullName ?: 'Nh√¢n vi√™n'}">Nh√¢n vi√™n</div>
      <div class="staff-role">B·ªô ph·∫≠n s√¢n b√≥ng</div>
    </div>
  </div>

  <div class="menu">
    <p class="menu-title">üèüÔ∏è Qu·∫£n l√Ω s√¢n</p>
    <a href="/employee/booking"  class="menu-link"><span class="menu-icon">üìã</span>ƒê∆°n ƒë·∫∑t s√¢n</a>
    <a href="/employee/checkin"  class="menu-link"><span class="menu-icon">üé´</span>Check-in kh√°ch</a>
    <a href="/employee/payment"  class="menu-link"><span class="menu-icon">üí∞</span>Thanh to√°n</a>
    <a href="/employee/refund"   class="menu-link"><span class="menu-icon">üë•</span>Ho√†n ti·ªÅn</a>
    <a href="/employee/schedule" class="menu-link"><span class="menu-icon">üìÖ</span>L·ªãch s√¢n</a>
	

	
    <p class="menu-title">üì¢ B√°o c√°o & Th√¥ng tin</p>
    <a href="/employee/incidents" class="menu-link"><span class="menu-icon">‚ö†Ô∏è</span>S·ª± c·ªë / Ghi ch√∫</a>
    <a href="/employee/report"    class="menu-link"><span class="menu-icon">üìä</span>Th·ªëng k√™ c√¥ng vi·ªác</a>
    <a href="/chat/employee"    class="menu-link"><span class="menu-icon">üíå</span>Tr·∫£ l·ªùi kh√°ch h√†ng</a>

    <p class="menu-title">‚öôÔ∏è C√° nh√¢n</p>
    <a href="/employee/profile" class="menu-link"><span class="menu-icon">üë§</span>Th√¥ng tin c√° nh√¢n</a>
    <a href="/logout"           class="menu-link"><span class="menu-icon">üö™</span>ƒêƒÉng xu·∫•t</a>
  </div>
</aside>


  <!-- MAIN CONTENT -->
  <section class="content">
    <header>
      <h2>B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>
    </header>

    <div class="welcome-card reveal">
      <h3>Ch√†o m·ª´ng tr·ªü l·∫°i! üëã</h3>
      <p>Ch√∫c b·∫°n m·ªôt ng√†y l√†m vi·ªác hi·ªáu qu·∫£ v√† tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng!</p>
    </div>

    <div class="stats-grid">
      <div class="stat-card reveal">
        <div class="stat-header"><div>ƒê∆°n h√¥m nay</div><div class="stat-icon blue">üìã</div></div>
        <div class="stat-value" data-counter data-target="12">12</div>
        <div class="stat-label">T·ªïng s·ªë ƒë∆°n</div>
      </div>
      <div class="stat-card reveal">
        <div class="stat-header"><div>Kh√°ch ƒëang ch∆°i</div><div class="stat-icon green">üë•</div></div>
        <div class="stat-value" data-counter data-target="4">4</div>
        <div class="stat-label">ƒêang ho·∫°t ƒë·ªông</div>
      </div>
      <div class="stat-card reveal">
        <div class="stat-header"><div>Doanh thu ca</div><div class="stat-icon purple">üí∞</div></div>
        <div class="stat-value" data-counter data-target="6350000" data-format="currency">6.35M</div>
        <div class="stat-label">Tri·ªáu ƒë·ªìng</div>
      </div>
    </div>

    <div class="quick-actions reveal">
      <h4>Thao t√°c nhanh</h4>
      <div class="action-grid">
        <button class="action-btn" onclick="window.location.href='/employee/checkin'">
          <span class="action-btn-icon">‚úÖ</span>Check-In
        </button>
        <button class="action-btn" onclick="window.location.href='/employee/payment'">
          <span class="action-btn-icon">üí≥</span>Thanh to√°n nhanh
        </button>
        <button class="action-btn" onclick="window.location.href='/employee/report'">
          <span class="action-btn-icon">üìä</span>Xem b√°o c√°o
        </button>
      </div>
    </div>

    <!-- V√≠ d·ª• 1 b·∫£ng (n·∫øu trang n√†y render th√™m b·∫£ng t·ª´ Thymeleaf, script b√™n d∆∞·ªõi v·∫´n t·ª± ƒë·ªông √°p d·ª•ng) -->
    <!--
    <table>
      <thead>
        <tr><th>M√£ ƒë∆°n</th><th>Kh√°ch h√†ng</th><th>Gi·ªù</th><th>Tr·∫°ng th√°i</th></tr>
      </thead>
      <tbody id="orders-body"></tbody>
    </table>
    -->
  </section>

  <script>
    // =========================
    // Utility: number format
    // =========================
    const VND = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND', maximumFractionDigits: 0 });
    const shortMoney = n => {
      if (n >= 1e9) return (n/1e9).toFixed(2).replace(/\.?0+$/,'') + 'B';
      if (n >= 1e6) return (n/1e6).toFixed(2).replace(/\.?0+$/,'') + 'M';
      if (n >= 1e3) return (n/1e3).toFixed(2).replace(/\.?0+$/,'') + 'K';
      return n.toString();
    };

    // =========================
    // Counter animation
    // =========================
    function animateCounter(el, to, format){
      const dur = 900; // ms
      const start = performance.now();
      const from = 0;
      function frame(t){
        const p = Math.min((t - start)/dur, 1);
        const eased = 1 - Math.pow(1 - p, 3); // easeOutCubic
        const val = Math.floor(from + (to - from) * eased);
        el.textContent = format === 'currency' ? shortMoney(val) : val.toLocaleString('vi-VN');
        if(p < 1) requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    }

    // =========================
    // Intersection reveal
    // =========================
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('show');
          io.unobserve(e.target);
        }
      });
    }, {threshold: .15});
    document.querySelectorAll('.reveal, .stat-card, .welcome-card').forEach(el=>io.observe(el));

    // Kh·ªüi t·∫°o counter khi card hi·ªÉn th·ªã
    const statCards = document.querySelectorAll('[data-counter]');
    const ioCounter = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          const el = e.target;
          const to = parseInt(el.getAttribute('data-target') || el.textContent, 10);
          const fmt = el.getAttribute('data-format');
          animateCounter(el, to, fmt);
          ioCounter.unobserve(el);
        }
      });
    }, {threshold: .5});
    statCards.forEach(el=>ioCounter.observe(el));

    // =========================
    // Ripple for buttons & menu links
    // =========================
    function addRipple(e){
      const btn = e.currentTarget;
      const circle = document.createElement('span');
      const d = Math.max(btn.clientWidth, btn.clientHeight);
      const r = d / 2;
      circle.classList.add('ripple');
      circle.style.width = circle.style.height = `${d}px`;
      const rect = btn.getBoundingClientRect();
      circle.style.left = `${e.clientX - rect.left - r}px`;
      circle.style.top = `${e.clientY - rect.top - r}px`;
      btn.appendChild(circle);
      setTimeout(()=>circle.remove(), 600);
    }
    document.querySelectorAll('.action-btn, .menu-link').forEach(b=>{
      b.addEventListener('click', addRipple);
    });

    // =========================
    // Active menu by URL path
    // =========================
    (function syncActive(){
      const path = location.pathname;
      const links = document.querySelectorAll('.menu-link');
      let matched = false;
      links.forEach(a=>{
        a.classList.remove('active');
        if (path !== '/' && a.getAttribute('href') && path.startsWith(a.getAttribute('href'))){
          a.classList.add('active'); matched = true;
        }
      });
      if(!matched) links[0]?.classList.add('active');
    })();

    // =========================
    // Table: skeleton + staged row reveal
    // =========================
    function applyTableEnhance(){
      const tables = document.querySelectorAll('.content table');
      tables.forEach(tbl=>{
        const tbody = tbl.querySelector('tbody');
        if(!tbody) return;

        // If tbody empty -> create temporary skeleton rows (auto removed when real data arrives)
        if(!tbody.children.length){
          const cols = tbl.querySelectorAll('thead th').length || 4;
          const skelRows = 5;
          const frag = document.createDocumentFragment();
          for(let i=0;i<skelRows;i++){
            const tr = document.createElement('tr');
            for(let c=0;c<cols;c++){
              const td = document.createElement('td');
              const sk = document.createElement('span');
              sk.className = 'skeleton';
              td.appendChild(sk);
              tr.appendChild(td);
            }
            frag.appendChild(tr);
          }
          tbody.appendChild(frag);
        }

        // When rows exist, stagger reveal
        [...tbody.rows].forEach((tr, idx)=>{
          setTimeout(()=>tr.classList.add('shown'), 60 * idx);
        });
      });
    }
    applyTableEnhance();

    // =========================
    // Example: fetch & hydrate (thay API th·∫≠t c·ªßa b·∫°n)
    // =========================
    async function hydrateDashboard(){
      try{
        // V√≠ d·ª• API (ƒë·ªïi sang API th·∫≠t): /api/employee/dashboard
        // const res = await fetch('/api/employee/dashboard');
        // const data = await res.json();
        // Demo gi·∫£ l·∫≠p:
        const data = await new Promise(r=>setTimeout(()=>r({
          ordersToday: 17,
          playingNow: 6,
          shiftRevenue: 8125000,
          orders: [
            {id:'DH-1021', name:'Nguy·ªÖn Minh An', time:'18:00‚Äì19:30', status:'ƒêang ch∆°i'},
            {id:'DH-1022', name:'L√™ V≈© H·∫£i', time:'19:30‚Äì21:00', status:'Ch·ªù'},
            {id:'DH-1023', name:'Tr·∫ßn Gia Huy', time:'17:00‚Äì18:00', status:'Ho√†n t·∫•t'},
          ]
        }), 900));

        // C·∫≠p nh·∫≠t counter (m∆∞·ª£t b·∫±ng counter animation)
        const orderEl = document.querySelector('.stat-card .stat-value[data-counter]');
        const [v1,v2,v3] = document.querySelectorAll('.stat-value[data-counter]');
        if(v1) animateCounter(v1, data.ordersToday);
        if(v2) animateCounter(v2, data.playingNow);
        if(v3) animateCounter(v3, data.shiftRevenue, 'currency');

        // N·∫øu c√≥ b·∫£ng #orders-body th√¨ g·∫Øn d·ªØ li·ªáu
        const body = document.getElementById('orders-body');
        if(body){
          body.innerHTML = '';
          const frag = document.createDocumentFragment();
          data.orders.forEach((o,i)=>{
            const tr = document.createElement('tr');
            tr.innerHTML = `
              <td>${o.id}</td>
              <td>${o.name}</td>
              <td>${o.time}</td>
              <td><span class="badge">${o.status}</span></td>
            `;
            frag.appendChild(tr);
          });
          body.appendChild(frag);
          // Reveal l·∫°i
          [...body.rows].forEach((tr, idx)=>setTimeout(()=>tr.classList.add('shown'), 50*idx));
        }
      }catch(e){
        console.error('Hydrate error', e);
      }
    }
    // G·ªçi ngay khi load
    hydrateDashboard();

    // =========================
    // Minor accessibility/keyboard
    // =========================
    document.querySelectorAll('.action-btn, .menu-link').forEach(el=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          el.click();
        }
      });
    });

  </script>
</body>
</html>
