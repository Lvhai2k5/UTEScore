<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UTEScore â€“ Thanh toÃ¡n</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; height: 100vh; color: #1e293b; overflow: hidden; }
  .sidebar { width: 270px; background: linear-gradient(180deg, #1e293b, #0f172a); color: white; display: flex; flex-direction: column; box-shadow: 4px 0 24px rgba(0,0,0,0.3); overflow-y: auto; }
  .logo-section { padding: 24px 16px; border-bottom: 1px solid rgba(255,255,255,0.1); }
  .logo { font-size: 26px; font-weight: 700; text-align: center; background: linear-gradient(135deg, #667eea, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .staff-info { text-align: center; margin-top: 16px; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 12px; }
  .staff-avatar { width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 26px; }
  .staff-name { font-weight: 600; font-size: 15px; }
  .staff-role { font-size: 13px; color: #94a3b8; }
  .menu { padding: 16px; flex: 1; }
  .menu-title { font-size: 13px; font-weight: 600; color: #94a3b8; margin: 8px 0; text-transform: uppercase; letter-spacing: 0.5px; }
  .menu-link { display: flex; align-items: center; gap: 10px; color: white; text-decoration: none; background: rgba(255,255,255,0.05); padding: 12px 14px; border-radius: 10px; margin-bottom: 6px; font-size: 15px; transition: all 0.3s ease; }
  .menu-link:hover { background: rgba(255,255,255,0.1); transform: translateX(4px); }
  .menu-link.active { background: linear-gradient(135deg, rgba(102,126,234,0.4), rgba(118,75,162,0.4)); }
  .menu-icon { font-size: 18px; width: 26px; text-align: center; }

  .content { flex: 1; background: #f8fafc; margin: 24px; border-radius: 24px; padding: 32px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); overflow-y: auto; }
  header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; }
  header h2 { font-size: 32px; font-weight: 700; background: linear-gradient(135deg, #1e293b, #475569); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

  .btn-notification { background: white; border: none; width: 44px; height: 44px; border-radius: 10px; cursor: pointer; font-size: 20px; position: relative; transition: all 0.3s ease; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
  .btn-logout { background: linear-gradient(135deg, #ef4444, #dc2626); border: none; color: white; padding: 10px 18px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }

  .card { background: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); padding: 24px; margin-bottom: 24px; }
  .table { width: 100%; border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; }
  .table th, .table td { padding: 12px 14px; text-align: left; border-bottom: 1px solid #e2e8f0; }
  .table th { background: #f1f5f9; font-weight: 600; color: #334155; }
  .badge { padding: 4px 10px; border-radius: 8px; font-size: 13px; font-weight: 600; }
  .badge.green { background: #dcfce7; color: #166534; }
  .badge.yellow { background: #fef9c3; color: #92400e; }

  .btn { display:inline-block; background:#2563eb; color:#fff; text-decoration:none; padding:8px 12px; border-radius:8px; font-weight:600; }
</style>
</head>
<body>
  <aside class="sidebar">
    <div class="logo-section">
    <div class="logo">UTEScore</div>
    <div class="staff-info">
      <div class="staff-avatar">âš™ï¸</div>
      <div class="staff-name" th:text="${nhanVienDangNhap?.hoTen}">NhÃ¢n viÃªn</div>
      <div class="staff-role">Bá»™ pháº­n sÃ¢n bÃ³ng</div>
    </div>
  </div>
    <div class="menu">
      <p class="menu-title">ğŸŸï¸ Quáº£n lÃ½ sÃ¢n</p>
      <a href="/employee/booking" class="menu-link active"><span class="menu-icon">ğŸ“‹</span>ÄÆ¡n Ä‘áº·t sÃ¢n</a>
        <a href="/employee/checkin" class="menu-link"><span class="menu-icon">ğŸ«</span>Check-in khÃ¡ch</a>
        <a href="/employee/payment" class="menu-link"><span class="menu-icon">ğŸ’°</span>Thanh toÃ¡n</a>
        <a href="/employee/refund" class="menu-link"><span class="menu-icon">ğŸ‘¥</span>HoÃ n tiá»n</a>
        <a href="/employee/schedule" class="menu-link"><span class="menu-icon">ğŸ“…</span>Lá»‹ch sÃ¢n</a>

      <p class="menu-title">ğŸ“¢ BÃ¡o cÃ¡o & ThÃ´ng tin</p>
      <a href="/employee/incidents" class="menu-link"><span class="menu-icon">âš ï¸</span>Sá»± cá»‘ / Ghi chÃº</a>
      <a href="/employee/report" class="menu-link"><span class="menu-icon">ğŸ“Š</span>Thá»‘ng kÃª cÃ´ng viá»‡c</a>

      <p class="menu-title">âš™ï¸ CÃ¡ nhÃ¢n</p>
      <a href="/employee/profile" class="menu-link"><span class="menu-icon">ğŸ‘¤</span>ThÃ´ng tin cÃ¡ nhÃ¢n</a>
      <a href="/logout" class="menu-link"><span class="menu-icon">ğŸšª</span>ÄÄƒng xuáº¥t</a>
    </div>
  </aside>
  
  <section class="content">
    <header>
      <h2>Thanh toÃ¡n</h2>
    </header>

    <div class="card">
      <table class="table">
  <thead>
    <tr>
      <th>MÃ£ TT</th>
      <th>KhÃ¡ch hÃ ng</th>
      <th>Tá»•ng tiá»n</th>
      <th>Tiá»n cá»c</th>
      <th>CÃ²n láº¡i</th>
      <th>Tráº¡ng thÃ¡i</th>
      <th>NgÃ y xá»­ lÃ½</th>
      <th>Thao tÃ¡c</th>
    </tr>
  </thead>

  <tbody>
    <tr th:each="p : ${payments}">
      <!-- MÃ£ thanh toÃ¡n -->
      <td th:text="'#' + ${p.maThanhToan}">#0000</td>

      <!-- TÃªn khÃ¡ch hÃ ng -->
      <td th:text="${p.thueSan != null && p.thueSan.khachHang != null ? p.thueSan.khachHang.hoTen : 'KhÃ¡ch láº»'}">TÃªn KH</td>

      <!-- Tá»•ng tiá»n -->
      <td th:text="${#numbers.formatDecimal(p.thueSan.tongTien,0,'COMMA',0,'POINT')} + ' Ä‘'">0 Ä‘</td>

      <!-- Tiá»n cá»c -->
      <td th:text="${#numbers.formatDecimal(p.thueSan.tienCocBatBuoc,0,'COMMA',0,'POINT')} + ' Ä‘'">0 Ä‘</td>

      <!-- âœ… TÃ­nh trá»±c tiáº¿p: Tá»•ng tiá»n - Tiá»n cá»c -->
      <td th:text="${#numbers.formatDecimal(p.thueSan.tongTien - p.thueSan.tienCocBatBuoc,0,'COMMA',0,'POINT')} + ' Ä‘'">0 Ä‘</td>

      <!-- Tráº¡ng thÃ¡i -->
      <td>
        <span th:classappend="${p.trangThaiThanhToan == 'HoÃ n táº¥t'} ? 'badge green' : 'badge yellow'"
              th:text="${p.trangThaiThanhToan}">Äáº·t cá»c</span>
      </td>

      <!-- NgÃ y thanh toÃ¡n -->
      <td th:text="${p.ngayThanhToan != null ? #temporals.format(p.ngayThanhToan, 'dd/MM/yyyy HH:mm') : '-'}">-</td>

      <!-- Thao tÃ¡c -->
      <td>
        <a th:href="@{'/employee/payment/vnpay/' + ${p.maThanhToan}}" class="btn">ğŸ’³ VNPay</a>
      </td>
    </tr>
  </tbody>
</table>

    </div>

    <p style="text-align:center;color:#64748b;">Â© 2025 UTEScore â€¢ Employee UI</p>
  </section>
</body>
</html>
